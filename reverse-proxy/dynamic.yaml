---
http:
  routers:
    http-redirect:
      rule: "HostRegexp(`{host:.+}`)"
      entryPoints:
        - web
      service: noop@internal
      middlewares:
        - redirect-to-https

    traefik-dashboard:
      rule: "Host(`traefik.admin.ergatikos.com`)"
      entryPoints:
        - websecure
      service: api@internal
      tls:
        certResolver: letsencrypt

  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true
        regex: "^(?:(?!\\.well-known/acme-challenge).)*$"
